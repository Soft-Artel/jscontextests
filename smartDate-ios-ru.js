"use strict";

/**
 * SmartDate v2.1.0.dev
 * Language: ru
 * Adapter: ios.js
 */

( function (){

	/*
	 * @file SD_tools.js
	 */
	var SD_tools={queries:[],workTime:null,localDate:null,_getDate:function(){return this.localDate?new Date(this.localDate):new Date},dateToISOString:function(date,dateOnly){var tzo=-date.getTimezoneOffset(),pad=function(d){return 10>d?"0"+d:d};return(dateOnly?[date.getFullYear(),"-",pad(date.getMonth()+1),"-",pad(date.getDate())]:[date.getFullYear(),"-",pad(date.getMonth()+1),"-",pad(date.getDate()),"T"+date.getHours(!0),":",date.getMinutes(!0),":",pad(date.getSeconds()),tzo>=0?"+":"-",pad(Math.abs(tzo/60)>>0),":",pad(Math.abs(tzo)%60)]).join("")},addDays:function(date,numOfDays){return date.setDate(date.getDate()+(void 0===numOfDays?0:numOfDays)),date},dayOfWeek:function(date,numOfDays){return date.setDate(date.getDate()-date.getDay()+numOfDays),date},dayOfNextWeek:function(date,numOfDays){var current=this._getDate();return date.setDate(date.getDate()-date.getDay()+numOfDays),current.getTime()>=date.getTime()&&date.setDate(date.getDate()-date.getDay()+7+numOfDays),date},addMonths:function(date,numOfMonths){return date.setMonth(date.getMonth()+numOfMonths),date},addYears:function(date,numOfYears){return date.setFullYear(date.getFullYear()+numOfYears),date},defineYear:function(dd,mm){var current=this._getDate(),newDate=this._getDate();return newDate.setMonth(mm-1),newDate.setDate(dd),current.getTime()>=newDate.getTime()&&(newDate=new Date(newDate.getFullYear()+1,mm-1,dd)),newDate},now:function(offset,options,duplicity){var hh,mm,time=new Date(this._getDate().setMinutes(this._getDate().getMinutes()+ +(void 0==offset?0:offset))),offs=Math.round((time-this._getDate())/864e5);return hh=time.getHours(),mm=time.getMinutes(),"h"===options?hh:"m"===options?mm:"ISO"===options?(+hh>9||0===+hh?hh:"0"+hh)+":"+(+mm>9?mm:"0"+ +mm):{h:hh,m:mm,offset:offs,duplicity:duplicity}},today:function(offset){var a=this.addDays(this._getDate(),+(void 0==offset?0:offset)),b=this.dateToISOString(a,!0);return b},beginOfWeek:function(offset){return this.dateToISOString(this.dayOfNextWeek(this._getDate(),offset),!0)},beginOfNextWeek:function(offset){return this.dateToISOString(this.dayOfNextWeek(this._getDate(),offset),!0)},currentMonth:function(offset){return this.dateToISOString(this.addMonths(this._getDate(),offset),!0)},currentYear:function(offset){return this.dateToISOString(this.addYears(this._getDate(),offset),!0)},monthOfNextYear:function(mm){var current=this._getDate(),d=this._getDate();return d.setMonth(mm-1),d.setDate(1),current.getTime()>=d.getTime()&&d.setFullYear(d.getFullYear()+1),this.dateToISOString(d,!0)},setDate:function(dd,mm,validate){return validate?this._validateDate(dd,mm,this.defineYear(dd,mm).getFullYear())?this.dateToISOString(this.defineYear(dd,mm),!0):void 0:this.dateToISOString(this.defineYear(dd,mm),!0)},setFullDate:function(dd,mm,yy,validate){var newDate=this._getDate();return newDate.setMonth(mm-1),newDate.setDate(dd),yy.toString().length>2||(yy=+yy>25?+("19"+yy):+("20"+yy)),newDate.setFullYear(yy),validate?this._validateDate(dd,mm,yy)?this.dateToISOString(newDate,!0):void 0:this.dateToISOString(newDate,!0)},nextMonth:function(offset){return this.dateToISOString(this.addMonths(new Date(this._getDate().setDate(1)),offset),!0)},nearestDayMonth:function(dd,mm){var current=this._getDate(),newDate=this._getDate();return newDate.setMonth(mm-1),newDate.setDate(dd),current.getTime()>=newDate.getTime()&&newDate.setFullYear(newDate.getFullYear()+1),this.dateToISOString(newDate,!0)},getNumberRegExp:/(?:_)(\d+)\b/,_getNumber:function(a){return+this.getNumberRegExp.exec(a)[1]},_publicateQuery:function(query){query._id=this.queries.length,this.queries[query._id]=query},_validateDate:function(dd,mm,yy){var date=new Date(+yy,+mm-1,+dd);return date.getFullYear()===+yy&&date.getMonth()==+mm-1&&date.getDate()==+dd?!0:void 0},_durationCounter:function(durationBegin,durationEnd,summode){var d1="object"==typeof durationBegin?60*durationBegin.h+durationBegin.m:durationBegin?60*durationBegin:60*this.now(0,"h")+this.now(0,"m"),d2="object"==typeof durationEnd?60*durationEnd.h+durationEnd.m:60*durationEnd;return durationBegin&&durationBegin.duplicity!==!1&&d2>d1&&("object"==typeof durationBegin?d2-(60*(durationBegin.h+12)+durationBegin.m)>0&&(d1=60*(durationBegin.h+12)+durationBegin.m):d2-60*(durationBegin+12)>0&&(d1=60*(durationBegin+12))),durationEnd&&durationEnd.duplicity!==!1&&d1>d2&&("object"==typeof durationEnd?d1<60*(durationEnd.h+12)+durationEnd.m&&(d2=60*(durationEnd.h+12)+durationEnd.m):60*(durationEnd+12)>d1&&(d2=60*(durationEnd+12))),summode?"allday"===durationBegin?durationBegin:d1.toString():d2>d1?(d2-d1).toString():d1>d2?(1440-d1+d2).toString():void 0}};

	/*
	 * @file tokens.js
	 */
	var tokens=[{regExp:/([^а-яА-яЁё0-9_]|^)((?:\d+[.,]\d+|\d+)(?:\s{0,5}(?:тысяч|тыс|тысячей))?\s{0,3}(?:рублей|руб|р\.|долларов))([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"ESCAPE"},{regExp:/([^а-яА-яЁё0-9_]|^)((?:\d+[.,]\d+|\d+)\s{0,5}(?:тысяч|тыс|тысячей|млн|милион|милионов|миллиарда|млрд\.|млрд))([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"ESCAPE"},{regExp:/([^а-яА-яЁё0-9_]|^)((?:\d+|\d+,\d+)\s+(?:кг|кило|килограмм|килограммов|граммов))/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h},type:"ESCAPE"},{regExp:/([^а-яА-яЁё0-9_]+|^)(\d+\s{0,3}(?:см|сантиметров|сантиметра|метров|метра|километров|километра))([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"ESCAPE"},{regExp:/([^а-яА-яЁё0-9_]+|^)((?:\d+[,]\d+|\d+)\s{0,3}(?:литр|баллов|балла|срока|срок|сроков|раза|раз))([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"ESCAPE"},{regExp:/([^а-яА-яЁё0-9_]+|^)(\d\s+(?:курс|курса|курсов))([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"ESCAPE"},{regExp:/([^а-яА-яЁё0-9_]+|^)(\d+\s+(?:аудитории|ауд\.|кабинет|каб.))([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"ESCAPE"},{regExp:/([^а-яА-яЁё0-9_]+|^)(на\sчас\sназад)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"ESCAPE"},{regExp:/([^а-яА-яЁё0-9_]+|^)(с\s?\d+\s?по\s\d+\s(?:страницы|страниц|стр\.|стр))([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"ESCAPE"},{regExp:/([^а-яА-яЁё0-9_]+|^)(\d+\s?-\s?\d+\s(?:человек|людей|чел\.|чел))([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"ESCAPE"},{regExp:/\b(\d{1}(?:.{0,2})\d{3}(?:.{0,2})\d{2,3}(?:.{0,2})\d{2}(?:.{0,2})\d{2})\b/gim,replace:function(h,c1){return this.captured=[c1],this.origin=c1,h},type:"ESCAPE"},{regExp:/\b(\d{3}[-]\d{2}[-]\d{2})\b/gim,replace:function(h,c1){return this.captured=[c1],this.origin=c1,h},type:"ESCAPE"},{regExp:/\b(\d+[.-]\d+[./-]\d+[./-]\d+)\b/gim,replace:function(h,c1){return this.captured=[c1],this.origin=c1,h},type:"ESCAPE"},{regExp:/(\d{2,99}[./\-\s]*\d{2,99}[./\-\s]*\d{5,99})/gim,replace:function(h,c1){return this.captured=[c1],this.origin=c1,h},type:"ESCAPE"},{regExp:/\b(\d{3}[,°\.]\d+|\d+[,°\.]\d{3})\b/gim,replace:function(h,c1){return this.captured=[c1],this.origin=c1,h},type:"ESCAPE"},{regExp:/(\d+Ч)/gm,replace:function(h,c1){return this.captured=[c1],this.origin=c1,h},func:function(){return this.captured[0]},type:"ESCAPE"},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(в\s{1,3}течение\s{1,3}часа)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return{h:1,m:0}},type:"DTIME",priority:5},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(полтора\sчаса)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return{h:1,m:30}},type:"DTIME",priority:5},{regExp:/((\d)[,.](\d)\s{0,3}(часам|часа|часов|ч\.|ч|минуту|минуты|минутам|минут|мин\.|мин|м\.|м))/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2,c3,c4],this.origin=c1,h},func:function(){return this.captured[2].match(/ч/i)?{h:this.captured[0],m:6*this.captured[1]}:{h:0,m:.6*this.captured[1]}},type:"DTIME",priority:4},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(за\s{1,3}полчаса)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return"-30"},type:"RTIME",priority:5},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(полчаса)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return{h:0,m:30}},type:"DTIME",priority:5},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(за\s{1,3}сутки)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return"-1440"},type:"RTIME",priority:5},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(на\s{1,3}полчаса)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return{h:0,m:30}},type:"DTIME",priority:5},{regExp:/(\d+[,°]\d+)/gim,replace:function(h,c1){return this.captured=[c1],this.origin=c1,h},type:"ESCAPE"},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_.]+|^)((?:(?:3[2-9]|[4-9][0-9])[.,\-°]\d+)|(?:\d+[.,\-°][6-9][0-9]))([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"ESCAPE"},{regExp:/\b(\d[:]\d)\b/gim,replace:function(h,c1){return this.captured=[+c1],this.origin=c1,h},type:"ESCAPE"},{regExp:/(«.+»|„.+“|‘.+’|".+"|'.+')/gim,replace:function(h,c1){return this.captured=[+c1],this.origin=c1,h},type:"ESCAPE"},{regExp:/([^а-яА-яЁё0-9_]|^)(в\sтечение\sдня)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return"allday"},type:"DTIME",priority:7},{regExp:/([^а-яА-яЁё0-9_]|^)(во\sвремя\sсобытия|вовремя)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return"0"},type:"RTIME",priority:7},{regExp:/([^а-яА-яЁё0-9_]|^)(в\sтечение)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return"0"},type:"DPREP",priority:7},{regExp:/((?:[^а-яА-яЁё0-9_]|^)(?:в|к)(?:[^а-яА-яЁё0-9_]|$)\s{0,3}\d{1,2}\s{0,3})(дня)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2.toLowerCase()],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"DAYTIME"},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(([0-1][0-9]|[2][0-4]|[0-9]).{0,3}?(?:часов|час|ч\.|ч).{0,3}?([0-5][0-9]|[0-9]).{0,3}?(?:минуту|минутам|минут|мин\.|мин|м\.|м))([^а-яА-яЁёa-zA-Z0-9\-]|$)/gim,replace:function(h,c1,c2,c3,c4,c5){return this.captured=[{h:+c3,m:+c4}],this.origin=c2,c1+h+c5},func:function(){return this.captured[0]},type:"TIME",priority:10},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)((\d{1,2})\s{1,3}час)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c3],this.origin=c2,c1+h+c4},func:function(){return this.captured[0]},type:"NUMBERHOUR",priority:5},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]+|^)(час|часу|два|двум|двух|две|три|трем|трём|трех|трёх|четыре|четырем|пять|пяти|шесть|шести|семь|семи|восемь|восьми|девять|девяти|десять|десяти|одиннадцать|одиннадцати|двенадцать|двенадцати|сорок)(\sс\sполовиной\sчаса)([^а-яА-яЁё0-9_\-]+|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2.toLowerCase()],this.origin=c2+c3,c1+h+c4},func:function(){return this.captured[0].match(/час/)?{h:1,m:30}:this.captured[0].match(/два/)?{h:2,m:30}:this.captured[0].match(/тр/)?{h:3,m:30}:this.captured[0].match(/чет/)?{h:4,m:30}:this.captured[0].match(/пят/)?{h:5,m:30}:this.captured[0].match(/шес/)?{h:6,m:30}:this.captured[0].match(/восем/)?{h:8,m:30}:this.captured[0].match(/сем/)?{h:7,m:30}:this.captured[0].match(/дев/)?{h:9,m:30}:this.captured[0].match(/дес/)?{h:10,m:30}:this.captured[0].match(/один/)?{h:11,m:30}:void 0},type:"TIME",priority:7},{regExp:/([^а-яА-яЁё0-9_]|^)(с|от)([^а-яА-яЁё0-9_].{0,20}?[^а-яА-яЁё0-9_](?:до|-)(?:[^а-яА-яЁё0-9_]|$))/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"FROM"},{regExp:/(#from_\d+.{0,20}?[^а-яА-яЁё0-9_])(до|-)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"TO"},{regExp:/([^а-яА-яЁё0-9_]|^)(до)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"TO"},{regExp:/([^а-яА-яЁё0-9_]|^)(во|в|на|к|с|около|от)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"PREP"},{regExp:/([^а-яА-яЁё0-9_]|^)(за)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"BEFORE"},{regExp:/([^а-яА-яЁё0-9_]|^)(следующий|следующем|следующей|следующую|следующ\.|следующ|след|след\.|сл\.)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"NEXT"},{regExp:/([^а-яА-яЁё0-9_]|^)(весь\sдень)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return"allday"},type:"DTIME",priority:7},{regExp:/(([^а-яА-яЁёa-zA-Z0-9\-_]|^)(позавчера|вчера|сегодня|завтра|послезавтра|через\sдень)([^а-яА-яЁёa-zA-Z0-9\-_]|$))/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c3.toLowerCase()],this.origin=c3,c2+h+c4},func:function(){switch(this.captured[0]){case"позавчера":return SD_tools.today(-2);case"вчера":return SD_tools.today(-1);case"сегодня":return SD_tools.today();case"завтра":return SD_tools.today(1);case"через день":return SD_tools.today(2);case"послезавтра":return SD_tools.today(2);default:SD_tools.today()}},type:"DATE",priority:10},{regExp:/\b(([0-2][0-9]|[3][0-1]|[0-9])[./-]([0][0-9]|1[0-2])[./-](201[5-9]|1[5-9]))\b/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2,c3,c4],this.origin=c1,void 0!==SD_tools.setFullDate(this.captured[0],this.captured[1],this.captured[2],!0)?h:void 0},func:function(){return SD_tools.setFullDate(this.captured[0],this.captured[1],this.captured[2])},type:"DATE",priority:10},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(([0-2][0-9]|[3][0-1]|[0-9])[./-]([0][0-9]|1[0-2])[./-](\d{4}|\d{2}))([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4,c5,c6){return this.captured=[c3,c4,c5],this.origin=c2,void 0!==SD_tools.setFullDate(this.captured[0],this.captured[1],this.captured[2],!0)?c1+h+c6:void 0},func:function(){return SD_tools.setFullDate(this.captured[0],this.captured[1],this.captured[2])},type:"DATE",priority:3},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(понедельника|понедельник|пон\.|пон|пн\.|пн|пнд\.|пнд|вторник|втор\.|втор|вт\.|вт|среда|среду|ср\.|ср|четверг|четв\.|четв|чет\.|чет|чтв\.|чтв|чт\.|чт|пятница|пятницу|пятн\.|пятн|пят\.|пят|пт\.|пт|суббота|субботу|субб\.|субб|суб\.|суб|сб\.|сб|воскресенье|воскр\.|воскр|вс\.|вс)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2.toLowerCase()],this.origin=c2,c1+h+c3},func:function(){return this.captured[0].match(/по|пн/)?1:this.captured[0].match(/вт/)?2:this.captured[0].match(/ср/)?3:this.captured[0].match(/че|чт/)?4:this.captured[0].match(/пя|пт/)?5:this.captured[0].match(/су|сб/)?6:this.captured[0].match(/во|вс/)?7:void 0},type:"WEEKDAY",priority:5},{regExp:/([^а-яА-яЁёa-zA-Z0-9\_.:-]|^)(([0-1][0-9]|[2][0-4]|[0-9])[-:.]([0-5][0-9]))(\s?-\s?([0-1][0-9]|[2][0-4]|[0-9])[-:.]([0-5][0-9]))([^а-яА-яЁёa-zA-Z0-9\_.:-]|$)/gim,replace:function(h,c1,c2,c3,c4,c5,c6,c7,c8){return this.captured=[{h:+c6-+c3,m:+c7-+c4}],this.origin=c5,c1+c2+h+c8},func:function(){return this.captured[0]},type:"DTIME",priority:10},{regExp:/([^а-яА-яЁёa-zA-Z0-9\_.:-]|^)(([0-1][0-9]|[2][0-4]|[0-9])([-:.])([0-5][0,5]))([^а-яА-яЁёa-zA-Z0-9\_.:-]|$)/gim,replace:function(h,c1,c2,c3,c4,c5,c6){var a={h:+c3,m:+c5};return 0===+c3&&(a.duplicity=!1),31>+c3&&13>+c5&&c4.match(/-\./)&&(a.datealternative=!0),this.captured=[a],this.origin=c2,c1+h+c6},func:function(){return this.captured[0]},type:"TIME",priority:10},{regExp:/([^а-яА-яЁёa-zA-Z0-9\_.:-]|^)(([0-1][0-9]|[2][0-4]|[0-9])([-:])([0-5][0-9]))([^а-яА-яЁёa-zA-Z0-9\_:-]|$)/gim,replace:function(h,c1,c2,c3,c4,c5,c6){var a={h:+c3,m:+c5};return 0===+c3&&(a.duplicity=!1),31>+c3&&13>+c5&&c4.match(/-\./)&&(a.datealternative=!0),this.captured=[a],this.origin=c2,c1+h+c6},func:function(){return this.captured[0]},type:"TIME",priority:10},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_.]|^)(([0-2][0-9]|[3][0-1]|[0-9])[./-]([0][1-9]|1[0-2]))([^а-яА-яЁёa-zA-Z0-9\-_.]|$)/gim,replace:function(h,c1,c2,c3,c4,c5){return this.captured=[c3,c4],this.origin=c2,c1+h+c5},func:function(){return SD_tools.nearestDayMonth(this.captured[0],this.captured[1])},type:"DATE",priority:6},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_.:]|^)((0[0-9]|1[0-2]|[0-9])([.-])([0-5][0-9]))([^а-яА-яЁёa-zA-Z0-9\-_:]|$)/gim,replace:function(h,c1,c2,c3,c4,c5,c6){var a={h:+c3,m:+c5};return 0===+c3&&(a.duplicity=!1),31>+c3&&13>+c5&&c4.match(/-\./)&&(a.datealternative=!0),this.origin=c2,this.captured=[a],c1+h+c6},func:function(){return this.captured[0]},type:"TIME",priority:6},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(полночь|обед|обеда)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0].match(/полн/i)?{h:0,m:0,duplicity:!1}:this.captured[0].match(/обед/i)?{h:12,m:0,duplicity:!1}:void 0},type:"TIME",priority:8},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(час|часу|два|двум|двух|две|три|трем|трём|трех|трёх|четыре|четырем|пять|пяти|шесть|шести|семь|семи|восемь|восьми|девять|девяти|десять|десяти|одиннадцать|одиннадцати|двенадцать|двенадцати|сорок)([^а-яА-яЁёA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2.toLowerCase()],this.origin=c2,c1+h+c3},func:function(){switch(this.captured[0]){case"час":case"часу":return 1;case"два":case"двум":case"двух":case"две":return 2;case"три":case"трем":case"трём":case"трёх":case"трех":return 3;case"четыре":case"четырем":return 4;case"пять":case"пяти":return 5;case"шесть":case"шести":return 6;case"семь":case"семи":return 7;case"восемь":case"восьми":return 8;case"девять":case"девяти":return 9;case"десять":case"десяти":return 10;case"одиннадцать":case"одиннадцати":return 11;case"двеннадцать":case"двеннадцати":return 12;case"сорок":return 40;default:return 1}},type:"NUMBER"},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]+|^)(двадцатого|двадцать\sпервое|двадцать\sпервого|двадцать\sвторое|двадцать\sвторого|двадцать\sтретье|двадцать\sтретьего|двадцать\sчетвертое|двадцать\sчетвертого|двадцать\sпятое|двадцать\sпятого|двадцать\sшестое|двадцать\sшестого|двадцать\sседьмое|двадцать\sседьмого|двадцать\sвосьмое|двадцать\sвосьмого|двадцать\sдевятое|двадцать\sдевятого|тридцатое|тридцатого|тридцать\sпервое|тридцать\sпервого|первое|первого|второе|второго|третье|третьего|четвертое|четвертого|пятое|пятого|шестое|шестого|седьмое|седьмого|восьмое|восьмого|девятое|девятого|десятое|десятого|одиннадцатое|одиннадцатого|двенадцатое|двенадцатого|тринадцатое|тринадцатого|четырнадцатое|четырнадцатого|пятнадцатое|пятнадцатого|шестнадцатое|шестнадцатого|семнадцатое|семнадцатого|восемнадцатое|восемнадцатого|девятнадцатое|девятнадцатого|двадцатое)(?:\s+(?:числа))?([^а-яА-яЁё0-9_\-]+|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2.toLowerCase()],this.origin=c2,c1+h+c3},func:function(){switch(this.captured[0]){case"первое":case"первого":return 1;case"второе":case"второго":return 2;case"три":case"трем":case"трём":case"третьего":return 3;case"четвертое":case"четвертого":return 4;case"пятое":case"пятого":return 5;case"шесть":case"шести":return 6;case"седьмое":case"седьмого":return 7;case"восьмое":case"восьмого":return 8;case"девятое":case"девятого":return 9;case"десять":case"десяти":case"десятое":return 10;case"одиннадцать":case"одиннадцати":return 11;case"двеннадцать":case"двеннадцати":return 12;case"тринадцатое":case"тринадцатого":return 13;case"четырнадцатое":case"четырнадцатого":return 14;case"пятнадцатое":case"пятнадцатого":return 15;case"шестнадцатое":case"шестнадцатого":return 16;case"семнадцатое":case"семнадцатого":return 17;case"восемнадцатое":case"восемнадцатого":return 18;case"девятнадцатое":case"девятнадцатого":return 19;case"двадцатого":case"двадцатое":return 20;case"двадцать первое":case"двадцать первого":return 21;case"двадцать второе":case"двадцать второго":return 22;case"двадцать третье":case"двадцать третьего":return 23;case"двадцать четвертое":case"двадцать четвертого":return 24;case"двадцать пятое":case"двадцать пятого":return 25;case"двадцать шестого":case"двадцать шестое":return 26;case"двадцать седьмое":case"двадцать седьмого":return 27;case"двадцать восьмого":case"двадцать восьмое":return 28;case"двадцать девятое":case"двадцать девятого":return 29;case"тридцатого":case"тридцатое":return 30;case"тридцать первое":case"тридцать первого":return 31;default:return 1}},type:"NUMBER"},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]+|^)(пол)(двадцатого|двадцать\sпервое|двадцать\sпервого|двадцать\sвторое|двадцать\sвторого|двадцать\sтретье|двадцать\sтретьего|двадцать\sчетвертое|двадцать\sчетвертого|двадцать\sпятое|двадцать\sпятого|двадцать\sшестое|двадцать\sшестого|двадцать\sседьмое|двадцать\sседьмого|двадцать\sвосьмое|двадцать\sвосьмого|двадцать\sдевятое|двадцать\sдевятого|тридцатое|тридцатого|тридцать\sпервое|тридцать\sпервого|первое|первого|второе|второго|третье|третьего|четвертое|четвертого|пятое|пятого|шестое|шестого|седьмое|седьмого|восьмое|восьмого|девятое|девятого|десятое|десятого|одиннадцатое|одиннадцатого|двенадцатое|двенадцатого|тринадцатое|тринадцатого|четырнадцатое|четырнадцатого|пятнадцатое|пятнадцатого|шестнадцатое|шестнадцатого|семнадцатое|семнадцатого|восемнадцатое|восемнадцатого|девятнадцатое|девятнадцатого|двадцатое)(?:\s+(?:числа))?([^а-яА-яЁё0-9_\-]+|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c3.toLowerCase()],this.origin=c2+c3,c1+h+c4},func:function(){return this.captured[0].match(/перв/)?{h:0,m:30}:this.captured[0].match(/втор/)?{h:1,m:30}:this.captured[0].match(/трет/)?{h:2,m:30}:this.captured[0].match(/четв/)?{h:3,m:30}:this.captured[0].match(/пят/)?{h:4,m:30}:this.captured[0].match(/шес/)?{h:5,m:30}:this.captured[0].match(/сед/)?{h:6,m:30}:this.captured[0].match(/вос/)?{h:7,m:30}:this.captured[0].match(/дев/)?{h:8,m:30}:this.captured[0].match(/дес/)?{h:9,m:30}:this.captured[0].match(/один/)?{h:10,m:30}:this.captured[0].match(/две/)?{h:11,m:30}:void 0},type:"TIME",priority:7},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]+|^)(пара|пару)([^а-яА-яЁё0-9_\-]+|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2.toLowerCase()],this.origin=c2,c1+h+c3},func:function(){switch(this.captured[0]){case"пара":case"пару":return 2;default:return 1}},type:"NUMBER"},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]+|^)(янв\.|янв|январь|января|январе|январю|фев\.|фев|февраль|февраля|феврале|февралю|мар\.|мар|марта|марте|марту|март|апр\.|апр|апрель|апреля|апреле|апрелю|май|мая|мае|маю|июн\.|июн|июнь|июня|июне|июню|июл\.|июл|июль|июля|июле|июлю|авг\.|авг|август|августе|августу|августа|сен\.|сен|сент\.|сент|сентябрь|сентября|сентябре|сентябрю|окт\.|окт|октябрь|октября|октябре|октябрю|ноя\.|ноя|нояб\.|нояб|ноябрь|ноября|ноябре|ноябрю|дек\.|дек|декабрь|декабря|декабре|декабрю)([^а-яА-яЁёa-zA-Z0-9\-_]+|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2.toLowerCase()],this.origin=c2,c1+h+c3},func:function(){return this.captured[0].match(/ян/)?"01":this.captured[0].match(/фев/)?"02":this.captured[0].match(/мар/)?"03":this.captured[0].match(/апр/)?"04":this.captured[0].match(/май|мая|мае|маю/)?"05":this.captured[0].match(/июн/)?"06":this.captured[0].match(/июл/)?"07":this.captured[0].match(/авг/)?"08":this.captured[0].match(/сен/)?"09":this.captured[0].match(/окт/)?"10":this.captured[0].match(/ноя/)?"11":this.captured[0].match(/дек/)?"12":void 0},type:"MONTH"},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(\d{1,2})(ч\.|ч)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2+c3,c1+h+c4},func:function(){return this.captured[0]},type:"NUMBERHOUR",priority:10},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(201[5-9]|1[5-9])г([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2,c1+h+" г"+c3},func:function(){return this.captured[0]},type:"NUMBER",priority:10},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(напомнить|предупредить)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3){return this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"ACTIONREMIND"},{regExp:/([^а-яА-яЁё0-9_\-]|^)(\d+)((?:(?:-ого|-го|го)\s{0,2}числа)|-ого|-го|го|е|ти|\s{0,2}числа)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[c2],this.origin=c2+c3,c1+h+c4},func:function(){return this.captured[0]},type:"DAYNUMBER"},{regExp:/([^а-яА-яЁё0-9_.]|^)(часам|часа|часов|ч\.|ч)([^а-яА-яЁё0-9_.]|$|\.$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"HOURINDEX"},{regExp:/([^а-яА-яЁё0-9_.]|^)((\d{1,2})(?:минуту|минуты|минутам|минут|мин\.|мин|м\.))([^а-яА-яЁё0-9_.]|$|\.$)/gim,replace:function(h,c1,c2,c3,c4){return this.captured=[+c3],this.origin=c2,c1+h+c4},func:function(){return{h:0,m:this.captured[0]}},type:"DTIME"},{regExp:/([^а-яА-яЁё0-9_.]|^)(минуту|минуты|минутам|минут|мин\.|мин|м\.|м)([^а-яА-яЁё0-9_.]|$|\.$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"MINUTINDEX"},{regExp:/(#hourindex_\d+\s{0,3})(дня)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2.toLowerCase()],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"DAYTIME"},{regExp:/([^а-яА-яЁёa-zA-Z0-9\-_]|^)(утра|утром|вечера|вечером|днем|полночь|ночи)([^а-яА-яЁёa-zA-Z0-9\-_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2.toLowerCase()],this.origin=c2,c1+h+c3},func:function(){return this.captured[0].match(/веч|дн/)?!0:!1},type:"DAYTIME"},{regExp:/([^а-яА-яЁё0-9_]|^)(дней|день|дня|дн|сутки|суток|недель|неделя|неделю|недели|нед|месяц|месяце|лет)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"DATEINDEX"},{regExp:/([^а-яА-яЁё0-9_]|^)(месяца|мес)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"MONTHINDEX"},{regExp:/([^а-яА-яЁё0-9_]|^)(года|году|год|г\.|г)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"YEARINDEX"},{regExp:/([^а-яА-яЁё0-9_\-]|^)(\d+)([^а-яА-яЁё0-9_\-a-zA-Z]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[+c2],this.origin=c2,c1+h+c3},func:function(){return this.captured[0]},type:"NUMBER"},{regExp:/([^а-яА-яЁё0-9_]|^)(через)([^а-яА-яЁё0-9_]|$)/gim,replace:function(h,c1,c2,c3){return this.captured=[c2],this.origin=c2,c1+h+c3},type:"AFTER"}];

	/*
	 * @file metatokens.js
	 */
	var metatokens=[{regExp:/(#number_(\d+)\s{0,3}(?:литр|баллов|балла|срока|срок|сроков|ступеней|ступенек|раза|раз))/gim,replace:function(h,t,c1,c2,c3){return this.captured=[c1],this.origin=c1,h},type:"ESCAPE"},{regExp:/(№\s{0,3}#date_\d+)/gim,replace:function(h,t,c1,c2,c3){return this.captured=[c1],this.origin=c1,h},type:"ESCAPE"},{regExp:/(#(?:day)?number_(\d+).{0,5}#month_(\d+).{0,5}#number_(\d+)(.{0,5}#yearindex_\d+)?)/gim,replace:function(h,t,c1,c2,c3,c4,c5){return this.captured=[t[c2].func(),+t[c3].func(),t[c4].func()],this.origin=c1,c5&&(this.priority+=1),(new Date).setYear(this.captured[2])<SD_tools._getDate()&&(this.priority-=8),void 0===SD_tools.setFullDate(this.captured[0],this.captured[1],this.captured[2],!0)||this.captured[2]>2020?void 0:this.captured[0].toString().length<3&&+this.captured[0]<32&&+this.captured[0]>0&&(4===this.captured[2].toString().length||2===this.captured[2].toString().length)?h:void 0},func:function(){return SD_tools.setFullDate(this.captured[0],this.captured[1],this.captured[2])},type:"DATE",priority:10},{regExp:/(#month_(\d+).{0,5}#(?:day)?number_(\d+).{0,5}#number_(\d+)(.{0,5}#yearindex_\d+)?)/gim,replace:function(h,t,c1,c2,c3,c4,c5){return this.captured=[t[c3].func(),+t[c2].func(),t[c4].func()],this.origin=c1,c5&&(this.priority+=1),void 0!==SD_tools.setFullDate(this.captured[0],this.captured[1],this.captured[2],!0)?((new Date).setYear(this.captured[2])<SD_tools._getDate()&&(this.priority-=5),this.captured[0].toString().length<3&&+this.captured[0]<31&&+this.captured[0]>0&&(4===this.captured[2].toString().length||2===this.captured[2].toString().length)?h:void 0):void 0},func:function(){return SD_tools.setFullDate(this.captured[0],this.captured[1],this.captured[2])},type:"DATE",priority:10},{regExp:/(#(?:day)?number_(\d+).{0,5}#month_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4,c5){return this.captured=[t[c2].func(),+t[c3].func()],this.origin=c1,void 0!==SD_tools.setDate(this.captured[0],this.captured[1],!0)&&this.captured[0].toString().length<3&&+this.captured[0]<32&&+this.captured[0]>0?h:void 0},func:function(){return SD_tools.setDate(this.captured[0],this.captured[1])},type:"DATE",priority:5},{regExp:/(#month_(\d+).{0,5}#number_(\d+)(.{0,5}#yearindex_\d+)?)/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func(),t[c3].func()],this.origin=c1,c4&&(this.priority+=1),void 0!==SD_tools.setFullDate(1,this.captured[0],this.captured[1],!0)&&(4===this.captured[1].toString().length||2===this.captured[1].toString().length)&&Math.abs(SD_tools._getDate().getUTCFullYear().toString().slice(-2)-this.captured[1].toString().slice(-2))<6?h:void 0},func:function(){return SD_tools.setFullDate(1,this.captured[0],this.captured[1])},type:"DATE",priority:8},{regExp:/(#month_(\d+).{0,5}#number_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func(),t[c3].func()],this.origin=c1,this.captured[1].toString().length<3&&+this.captured[1]<31&&+this.captured[1]>0?h:void 0},func:function(){return SD_tools.nearestDayMonth(this.captured[1],this.captured[0])},type:"DATE",priority:8},{regExp:/(#next_\d+.{0,5}#month_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func()],this.origin=c1,h},func:function(){return SD_tools.nearestDayMonth(1,this.captured[0])},type:"DATE",priority:5},{regExp:/(#after_\d+(.{0,5}#number_(\d+))?.{0,5}#(?:date|month|year)index_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return c2?(this.captured=[t[c4].origin,+t[c3].func()],this.priority+=2):this.captured=[t[c4].origin],this.origin=c1,h},func:function(){return this.captured[1]?this.captured[0].match(/дн|ден|сут/i)?SD_tools.today(this.captured[1]+1):this.captured[0].match(/нед/i)?SD_tools.today(7*this.captured[1]):this.captured[0].match(/мес/i)?SD_tools.currentMonth(+this.captured[1]):this.captured[0].match(/г|лет/i)?SD_tools.currentYear(+this.captured[1]):SD_tools.today():this.captured[0].match(/дн|ден|сут/i)?SD_tools.today(1):this.captured[0].match(/нед/i)?SD_tools.today(7):this.captured[0].match(/мес/i)?SD_tools.currentMonth(1):this.captured[0].match(/г|лет/i)?SD_tools.currentYear(1):SD_tools.today()},type:"DATE",priority:3},{regExp:/(#next_\d+.{0,5}#(?:date|month)index_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].origin],this.origin=c1,h},func:function(){return this.captured[0].match(/дн|ден|сут/i)?SD_tools.today(1):this.captured[0].match(/нед/i)?SD_tools.beginOfNextWeek(1):this.captured[0].match(/мес/i)?SD_tools.nextMonth(1):SD_tools.today()},type:"DATE",priority:3},{regExp:/(#actionremind_\d+.+?#before_\d+.{0,5})(#number_(\d+).{0,5}#(?:date|month)index_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4,c5){return this.captured=[t[c3],t[c4].origin],this.priority+=1,this.origin=c2,c1+h},func:function(){return this.captured[1].match(/дн|ден|сут/i)?"-"+1440*this.captured[0].func():this.captured[1].match(/нед/i)?"-"+10080*this.captured[0].func():"-0"},type:"RTIME",priority:7},{regExp:/(#number_(\d+).{0,5}#hourindex_(\d+).{0,5}#number_(\d+).{0,5}#minutindex_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4,c5){return+t[c2].func()<24&&+t[c4].func()<60?(this.captured=[+t[c2].func(),+t[c4].func()],this.origin=c1,h):void 0},func:function(){return{h:this.captured[0],m:this.captured[1]}},type:"TIME",priority:7},{regExp:/(#actionremind_\d+.+?#before_\d+.{0,5})(#number_(\d+)(.{0,5}#(?:hour|minut)index_(\d+))?)/gim,replace:function(h,t,c1,c2,c3,c4,c5){return c4?(this.captured=[t[c3],t[c5].origin],this.priority+=1):this.captured=[t[c3]],this.origin=c2,c1+h},func:function(){return this.captured[1]?this.captured[1].match(/ч/i)?"-"+60*this.captured[0].func():"-"+this.captured[0].func():this.captured[0].origin.match(/час/i)?"-60":"-"+this.captured[0].func()},type:"RTIME",priority:7},{regExp:/(#before_\d+.{0,5})(#number_(\d+).{0,5}#(?:hour|minut)index_(\d+))(.{0,25}#actionremind_\d+)/gim,replace:function(h,t,c1,c2,c3,c4,c5){return this.captured=[t[c3].func(),t[c4].origin],this.origin=c2,c1+h+c5},func:function(){return this.captured[1].match(/ч/i)?"-"+60*this.captured[0]:"-"+this.captured[0]},type:"RTIME",priority:7},{regExp:/(#prep_(\d+)[\s]{0,5})(#numberhour_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return t[c2].origin.match(/в|к/i)?(this.captured=[t[c4].func()],this.origin=c2,c1+h):void 0},func:function(){return{h:this.captured[0],m:0}},type:"TIME",priority:7},{regExp:/(#to_\d+[\s]{0,5})(#numberhour_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c3].func()],this.origin=c2,c1+h},func:function(){return{h:this.captured[0],m:0}},type:"TIME",priority:7},{regExp:/(#time_(\d+).{0,5}#daytime_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func(),t[c3].func()],this.origin=c1,this.priority=t[c2].priority+1,t[c3].origin.match(/ноч/i)&&12===+t[c2].func().h&&(this.captured=[{h:0,m:0}]),h},func:function(){return this.captured[0].h<12&&this.captured[1]?{h:this.captured[0].h+12,m:this.captured[0].m}:(this.captured[0].duplicity=!1,this.captured[0])},type:"TIME",priority:0},{regExp:/(#after_\d+.{0,5}#number_(\d+).{0,5}#(?:hour|minut)index_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[+t[c2].func(),t[c3].origin],this.origin=c1,h},func:function(){return this.captured[1].match(/ч/i)?{h:+this.captured[0],m:0}:{h:0,m:+this.captured[0]}},type:"ATIME",priority:7},{regExp:/(#number_(\d+)(.{0,5}#hourindex_\d+)?.{0,5}#daytime_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[+t[c2].func(),t[c4]],this.origin=c1,c3&&(this.priority+=1),h},func:function(){return 12===this.captured[0]&&this.captured[1].origin.match(/ноч/i)?{h:0,m:0,duplicity:!1}:this.captured[0]<12&&this.captured[1].func()?{h:this.captured[0]+12,m:0,duplicity:!1}:{h:this.captured[0],m:0,duplicity:!1}},type:"TIME",priority:8},{regExp:/(#daytime_(\d+).{0,3})(#prep_\d+.{0,5})(#number_(\d+)(.{0,5}#hourindex_\d+)?)/gim,replace:function(h,t,c1,c2,c3,c4,c5,c6){return this.captured=[t[c2].func(),+t[c5].func()],this.origin=c1+c4,c6&&(this.priority+=1),c3+h},func:function(){return this.captured[1]<12&&this.captured[0]?{h:this.captured[1]+12,m:0,duplicity:!1}:{h:this.captured[1],m:0,duplicity:!1}},type:"TIME",priority:8},{regExp:/(#number_(\d+).{0,5}#dateindex_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return+t[c2].func()<13&&t[c3].origin.match(/дн/i)?(this.captured=[+t[c2].func()],this.origin=c1,h):void 0},func:function(){return{h:this.captured[0]+12>24?this.captured[0]:this.captured[0]+12,m:0}},type:"TIME",priority:8},{regExp:/(#before_\d+.{0,5})(#number_(\d+).{0,5}#(?:hour|minut)index_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[+t[c3].func(),t[c4].origin],this.origin=c2,c1+h},func:function(){return this.captured[1].match(/ч/i)?"-"+60*this.captured[0]:"-"+this.captured[0]},type:"RTIME",priority:7},{regExp:/(#after_\d+.{0,5}#number_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2]],this.origin=c1,h},func:function(){return this.captured[0].origin.match(/ч/i)?{h:+this.captured[0].func(),m:0}:{h:0,m:+this.captured[0].func()}},type:"ATIME",priority:3},{regExp:/(#prep_(\d+).{0,5}#dtime_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return t[c2].origin.match(/на/i)?(this.captured=[t[c3].func()],this.priority+=1,this.origin=c1,h):void 0},func:function(){return this.captured[0]},type:"DTIME",priority:7},{regExp:/(#prep_(\d+).{0,5}#number_(\d+).{0,5}#(?:hour|minut)index_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return t[c2].origin.match(/на/i)?(this.captured=[+t[c3].func(),t[c4].origin],this.origin=c1,h):void 0},func:function(){return this.captured[1].match(/ч/i)?{h:this.captured[0],m:0}:{h:0,m:this.captured[0]}},type:"DTIME",priority:7},{regExp:/(#prep_(\d+).{0,5}#number_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return t[c2].origin.match(/на/i)&&t[c3].origin.match(/час/i)?(this.captured=[t[c3]],this.origin=c1,h):void 0},func:function(){return{h:1,m:0}},type:"DTIME",priority:7},{regExp:/(#after_(\d+).{0,5}#number_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return t[c3].origin.match(/час/i)?(this.captured=[t[c3]],this.origin=c1,h):void 0},func:function(){return{h:1,m:0}},type:"ATIME",priority:7},{regExp:/(#actionremind_\d+.{0,5}#before_\d+.{0,5})(#(?:date|month)index_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c3]],this.origin=c2,c1+h},func:function(){return this.captured[0].origin.match(/дн|ден|сут/i)?"-1440":this.captured[0].origin.match(/нед/i)?"-10080":"-0"},type:"RTIME",priority:7},{regExp:/(#number_(\d+).{0,5}#hourindex_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return+t[c2].func()<24?(this.captured=[+t[c2].func(),t[c3].origin],this.origin=c1,h):void 0},func:function(){return{h:this.captured[0],m:0}},type:"TIME",priority:7},{regExp:/(#number_(\d+).{0,5}#hourindex_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[+t[c2].func(),t[c3].origin],this.origin=c1,h},func:function(){return{h:this.captured[0],m:0}},type:"DTIME",priority:7},{regExp:/(#date_(\d+).{0,5}#(?:year|month)index_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func()],this.origin=c1,this.priority=t[c2].priority+1,h},func:function(){return this.captured[0]},type:"DATE",priority:0},{regExp:/(#next_\d+.{0,5}#date_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func()],this.origin=c1,this.priority=t[c2].priority+1,h},func:function(){return this.captured[0]},type:"DATE",priority:0},{regExp:/(#time_(\d+).{0,5}#hourindex_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func()],this.origin=c1,this.priority=t[c2].priority,h},func:function(){return this.captured[0]},type:"TIME",priority:0},{regExp:/(#before_\d+.{0,5}#rtime_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func()],this.origin=c1,this.priority=t[c2].priority,h},func:function(){return this.captured[0]},type:"RTIME",priority:0},{regExp:/(#before_\d+.{0,5}#time_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func()],this.origin=c1,this.priority=t[c2].priority,h},func:function(){return"-"+(60*this.captured[0].h+this.captured[0].m)},type:"RTIME",priority:0},{regExp:/(#dprep_\d+.{0,5}#time_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func()],this.origin=c1,this.priority=t[c2].priority,h},func:function(){return this.captured[0]},type:"DTIME",priority:0},{regExp:/(#prep_\d+.{0,5})?(#time_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return void 0===c1&&t[c3].func().datealternative&&SD_tools.setDate(t[c3].func().h,t[c3].func().m,!0)?(this.captured=[SD_tools.setDate(t[c3].func().h,t[c3].func().m)],this.origin=c2,this.priority=t[c3].priority-5,h):void 0},func:function(){return this.captured[0]},type:"DATE",priority:0},{regExp:/(#after_\d+\s{0,3})(#d?time_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c3].func()],this.origin=c1+c2,h},func:function(){return this.captured[0]},type:"ATIME",priority:8},{regExp:/(#numberhour_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func()],this.origin=c1,h},func:function(){return{h:this.captured[0],m:0}},type:"DTIME",priority:7},{regExp:/(#before_\d+.{0,5}#dtime_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func()],this.origin=c1,this.priority=t[c2].priority,h},func:function(){return"-"+(60*+this.captured[0].h+ +this.captured[0].m)},type:"RTIME",priority:0},{regExp:/(#weekday_(\d+)(?:.{0,5})#date_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return t[c2].func()===new Date(t[c3].func()).getDay()?(this.captured=[t[c2].func(),t[c3].func()],this.origin=c1,this.priority=t[c3].priority+3,h):void 0},func:function(){return this.captured[1]},type:"DATE",priority:0},{regExp:/(#date_(\d+).{0,5}#weekday_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return t[c3].func()===new Date(t[c2].func()).getDay()?(this.captured=[t[c2].func(),t[c3].func()],this.origin=c1,this.priority=t[c2].priority+3,h):void 0},func:function(){return this.captured[0]},type:"DATE",priority:0},{regExp:/(#next_\d+.{0,5}#weekday_(\d+))/gim,replace:function(h,t,c1,c2){return this.captured=[t[c2].func()],this.origin=c1,this.priority=t[c2].priority,h},func:function(){return SD_tools.beginOfNextWeek(this.captured[0])},type:"DATE",priority:0},{regExp:/(#weekday_(\d+))/gim,replace:function(h,t,c1,c2){return this.captured=[t[c2].func()],this.origin=c1,this.priority=t[c2].priority,h},func:function(){return SD_tools.beginOfWeek(this.captured[0])},type:"DATE",priority:0},{regExp:/(#month_(\d+))/gim,replace:function(h,t,c1,c2,c3,c4){return this.captured=[t[c2].func()],this.origin=c1,h},func:function(){return SD_tools.nearestDayMonth(1,this.captured[0])},type:"DATE",priority:3}];

	/*
	 * @file combinations.js
	 */
	var combinations=[{regExp:/(?:(#prep_\d+|#before_\d+).{0,3})?(#date_\d+)(?:[^#]{0,100}?(#prep_\d+).{0,3}|[^#]{0,100}?)(#time_\d+)[^#]{0,100}?(#dtime_\d+)[^#]{0,100}?(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[4])].func(),!1,!0),event_alarms:tokens[SD_tools._getNumber(match[6])].func(),event_result:text,priority:40+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[4])].priority+tokens[SD_tools._getNumber(match[6])].priority};return c}},{regExp:/(?:(#prep_\d+).{0,5})?(#date_\d+).+?(#prep_\d+|#from_\d+).{0,3}(#number_\d+).+?(#to_\d+).{0,3}(#number_\d+).{0,50}(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){return tokens[SD_tools._getNumber(match[3])].func()>23?void 0:{event_startTime:{h:tokens[SD_tools._getNumber(match[3])].func(),m:0},event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(+tokens[SD_tools._getNumber(match[3])].func(),+tokens[SD_tools._getNumber(match[5])].func()),event_alarms:tokens[SD_tools._getNumber(match[7])].func(),event_result:text,priority:35+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[7])].priority}}},{regExp:/(?:(#prep_\d+|#before_\d+).{0,3})?(#date_\d+)(?:[^#]+?(#prep_\d+).{0,3}|[^#]+?)(#time_\d+).*?(#dtime_\d+).+?(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[4])].func(),!1,!0),event_alarms:tokens[SD_tools._getNumber(match[6])].func(),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[4])].priority+tokens[SD_tools._getNumber(match[6])].priority};return c}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.{0,50}(#prep_\d+).{0,3}|.{0,5})(#time_\d+).+?(#to_\d+).{0,3}(#number_\d+).+?(#actionremind_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[1])].func().length>31)){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_alarms:"0",event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[3])].func(),+tokens[SD_tools._getNumber(match[5])].func()),event_result:text,priority:40+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};return c}}},{regExp:/(?:(#prep_\d+).{0,3})?(#time_\d+).{0,25}(#date_\d+).{0,25}(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[2])].func(),event_startTime:tokens[SD_tools._getNumber(match[1])].func(),event_alarms:tokens[SD_tools._getNumber(match[4])].func(),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[2])].priority+tokens[SD_tools._getNumber(match[4])].priority};return c}},{regExp:/(?:(#prep_\d+|#before_\d+).{0,3})?(#date_\d+)(?:[^#]+?(#prep_\d+).{0,3}|[^#]+?)(#time_\d+).+?(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_alarms:tokens[SD_tools._getNumber(match[5])].func(),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[5])].priority};return c}},{regExp:/(?:(#prep_\d+|#before_\d+).{0,3})?(#date_\d+)(?:.{0,25}(#prep_\d+).{0,3}|.{0,25})(#time_\d+)[\s\S]+(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_alarms:tokens[SD_tools._getNumber(match[5])].func(),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[5])].priority};return c}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#number_\d+).+(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[3])].func()>23)){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[3])].func(),m:0},event_alarms:tokens[SD_tools._getNumber(match[5])].func(),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[5])].priority};return c}}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#number_\d+).{0,5}(#dtime_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[3])].func()>23)){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[3])].func(),m:0},event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[4])].func(),!1,!0),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[4])].priority};return c}}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#number_\d+).+(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[3])].func()>23)){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[3])].func(),m:0},event_alarms:tokens[SD_tools._getNumber(match[5])].func(),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[5])].priority};return c}}},{regExp:/(?:(#prep_\d+).{0,5})?(#date_\d+)(?:.{0,25}(#prep_\d+).{0,5}|.{0,5})(#time_\d+).{0,5}(#actionremind_\d+)/gim,extract:function(tokens,match,text){return{event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_alarms:"0",event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority}}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.{0,25}(#prep_\d+).{0,5}|.{0,5})(#number_\d+).+(#actionremind_\d+)/gim,extract:function(tokens,match,text){return tokens[SD_tools._getNumber(match[3])].func()>23?void 0:{event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:{h:+tokens[SD_tools._getNumber(match[3])].func(),m:0},event_alarms:"0",event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority}}},{regExp:/(#actionremind_\d+).+(#date_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#time_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[3])].func()>23)){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_alarms:"0",event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};return c}}},{regExp:/(#actionremind_\d+).+(#date_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#number_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[3])].func()>23)){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[3])].func(),m:0},event_alarms:"0",event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority};return c}}},{regExp:/(#from_\d+).{0,3}(#time_\d+).{0,3}(#to_\d+).{0,3}(#time_\d+).+(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[1])].func().length>23&&tokens[SD_tools._getNumber(match[1])].func().length>23)){var c={event_startTime:tokens[SD_tools._getNumber(match[1])].func(),event_alarms:tokens[SD_tools._getNumber(match[5])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[1])].func(),tokens[SD_tools._getNumber(match[3])].func()),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[2])].priority+ +tokens[SD_tools._getNumber(match[6])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return this.match=match,c.event_startDate=res.date,c}})}}},{regExp:/(#from_\d+).{0,3}(#number_\d+).{0,3}(#to_\d+).{0,3}(#time_\d+).+(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[1])].func().length>23)){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_alarms:tokens[SD_tools._getNumber(match[5])].func(),event_duration:SD_tools._durationCounter(+tokens[SD_tools._getNumber(match[1])].func(),tokens[SD_tools._getNumber(match[3])].func()),event_result:text,priority:28+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[5])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return this.match=match,c.event_startDate=res.date,c}})}}},{regExp:/(#from_\d+).{0,3}(#number_\d+).{0,3}(#to_\d+).{0,3}(#time_\d+).+(#actionremind_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[1])].func().length>23&&tokens[SD_tools._getNumber(match[1])].func().length>23)){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_alarms:"0",event_duration:SD_tools._durationCounter(+tokens[SD_tools._getNumber(match[1])].func(),tokens[SD_tools._getNumber(match[3])].func()),event_result:text,priority:26+tokens[SD_tools._getNumber(match[3])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return this.match=match,c.event_startDate=res.date,c}})}}},{regExp:/(#prep_\d+|#from_\d+).{0,3}(#time_\d+).{0,3}(#prep_\d+|#to_\d+).{0,3}(#time_\d+).+(#actionremind_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[1])].func().length>23&&tokens[SD_tools._getNumber(match[1])].func().length>23)){var c={event_startTime:+tokens[SD_tools._getNumber(match[1])].func(),event_alarms:"0",event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[1])].func(),tokens[SD_tools._getNumber(match[3])].func()),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return this.match=match,c.event_startDate=res.date,c}})}}},{regExp:/(#prep_\d+).{0,3}(#time_\d+).{0,3}(#dtime_\d+).+(#actionremind_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:+tokens[SD_tools._getNumber(match[1])].func(),event_alarms:"0",event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[2])].func(),!1,!0),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return this.match=match,c.event_startDate=res.date,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.+?(#prep_\d+).{0,3}|.+?)(#time_\d+).{0,15}(#dtime_\d+)/gim,extract:function(tokens,match,text){return{event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[4])].func(),!1,!0),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[4])].priority}}},{regExp:/(?:(#prep_\d+).{0,5})?(#date_\d+).+(#prep_\d+|#from_\d+).{0,3}(#time_\d+).{0,3}(#to_\d+).{0,3}(#time_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[3])].func(),tokens[SD_tools._getNumber(match[5])].func()),event_result:text,priority:20+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[5])].priority};return+tokens[SD_tools._getNumber(match[5])].func().h>12&&(c.event_startTime.duplicity=!1),c}},{regExp:/(?:(#prep_\d+).{0,5})?(#date_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#time_\d+).{0,3}[-].{0,3}(#time_\d+)/gim,extract:function(tokens,match,text){return{event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[3])].func(),tokens[SD_tools._getNumber(match[4])].func()),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[4])].priority}}},{regExp:/(?:(#prep_\d+).{0,5})?(#date_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#time_\d+).{0,5}(#dtime_\d+)/gim,extract:function(tokens,match,text){return{event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[4])].func(),!1,!0),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[4])].priority}}},{regExp:/(?:(#prep_\d+).{0,5})?(#date_\d+)(?:.+(#prep_\d+|#from_\d+).{0,3}|.{0,5})(#d?time_\d+)(?:.{0,5}(#to_\d+).{0,3}|.{0,3})(#d?time_\d+)/gim,extract:function(tokens,match,text){return{event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[3])].func(),tokens[SD_tools._getNumber(match[5])].func()),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[5])].priority}}},{regExp:/(?:(#prep_\d+).{0,5})?(#date_\d+)(?:.+(#from_\d+).{0,3}|.{0,5})(#time_\d+).+?(#to_\d+).{0,3}(#number_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[3])].func(),tokens[SD_tools._getNumber(match[3])].func()),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};return c}},{regExp:/(?:(#prep_\d+).{0,5})?(#date_\d+).+?(#from_\d+).{0,3}(#number_\d+).+?(#to_\d+).{0,3}(#time_\d+)/gim,extract:function(tokens,match,text){return{event_startTime:{h:+tokens[SD_tools._getNumber(match[3])].func(),m:0},event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[3])].func(),tokens[SD_tools._getNumber(match[5])].func()),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[5])].priority}}},{regExp:/(?:(#prep_\d+).{0,5})?(#date_\d+).+(#prep_\d+|#from_\d+).{0,3}(#number_\d+).+?(#to_\d+).{0,3}(#number_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[3])].func()>23)){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[3])].func(),m:0},event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(+tokens[SD_tools._getNumber(match[3])].func(),+tokens[SD_tools._getNumber(match[5])].func()),event_result:text,priority:25+tokens[SD_tools._getNumber(match[1])].priority};return+tokens[SD_tools._getNumber(match[5])].func()>12&&(c.event_startTime.duplicity=!1),c}}},{regExp:/(#prep_\d+|#from_\d+).{0,3}(#number_\d+).{0,3}(#prep_\d+|#to_\d+).{0,3}(#number_\d+).+(#prep_\d+).{0,3}(#date_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[1])].func().length>23&&tokens[SD_tools._getNumber(match[1])].func().length>23)){var c={event_startDate:tokens[SD_tools._getNumber(match[5])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_duration:SD_tools._durationCounter(+tokens[SD_tools._getNumber(match[1])].func(),tokens[SD_tools._getNumber(match[3])].func()),event_result:text,priority:30+tokens[SD_tools._getNumber(match[5])].priority};return c}}},{regExp:/(#from_\d+).{0,3}(#number_\d+).{0,3}(#to_\d+).{0,3}(#number_\d+).+?(#actionremind_\d+).{0,3}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_result:text,event_alarms:tokens[SD_tools._getNumber(match[5])].func(),priority:30};c.event_duration=SD_tools._durationCounter(+tokens[SD_tools._getNumber(match[1])].func(),tokens[SD_tools._getNumber(match[3])].func()),SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#from_\d+).{0,3}(#number_\d+).{0,3}(#to_\d+).{0,3}(#number_\d+).+?(#actionremind_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_result:text,event_alarms:"0",priority:30};c.event_duration=SD_tools._durationCounter(+tokens[SD_tools._getNumber(match[1])].func(),+tokens[SD_tools._getNumber(match[3])].func()),SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#prep_\d+).{0,3}(#date_\d+)(?:.{0,50}(#prep_\d+).{0,3}|.{0,5})(#time_\d+).+(#to_\d+).{0,3}(#time_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[1])].func().length>31)){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[3])].func(),tokens[SD_tools._getNumber(match[5])].func()),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};return c}}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+).+?(#prep_\d+).{0,3}(#number_\d+).{0,5}?(#dtime_\d+)/gim,extract:function(tokens,match,text){return tokens[SD_tools._getNumber(match[3])].func()>23?void 0:{event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[3])].func(),m:0},event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[4])].func(),!1,!0),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[4])].priority}}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+).+(#dtime_\d+).+(#actionremind_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[2])].func(),!1,!0),event_result:text,event_alarms:"0",priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+).+(#dtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[2])].func(),!1,!0),event_result:text,priority:19+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#time_\d+).+?(#actionremind_\d+).+?(#dtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[3])].func(),!1,!0),event_alarms:"0",event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#time_\d+).+(#actionremind_\d+)/gim,extract:function(tokens,match,text){return{event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_alarms:"0",event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority}}},{regExp:/(?:(#prep_\d+).{0,3})?(#time_\d+).+?(#actionremind_\d+).{0,20}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:tokens[SD_tools._getNumber(match[1])].func(),event_alarms:tokens[SD_tools._getNumber(match[3])].func(),event_result:text,priority:18+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+).+?(#dtime_\d+).+?(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_alarms:tokens[SD_tools._getNumber(match[4])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[2])].func(),!1,!0),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[2])].priority+tokens[SD_tools._getNumber(match[4])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+).+?(#atime_\d+)/gim,extract:function(tokens,match,text){return{event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:SD_tools.now(60*+ +tokens[SD_tools._getNumber(match[2])].func().h+ +tokens[SD_tools._getNumber(match[2])].func().m),event_result:text,priority:31+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[2])].priority}}},{regExp:/(#actionremind_\d+).{0,5}(#rtime_\d+)(?:.+(#prep_\d+).{0,3}|.+?)(#date_\d+)(?:.+(#prep_\d+).{0,3}|.+?)(#time_\d+)/gim,extract:function(tokens,match,text){return{event_startDate:tokens[SD_tools._getNumber(match[3])].func(),event_startTime:tokens[SD_tools._getNumber(match[5])].func(),event_alarms:tokens[SD_tools._getNumber(match[1])].func(),event_result:text,priority:30+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority+tokens[SD_tools._getNumber(match[5])].priority}}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.+?(#prep_\d+).{0,3}|.{0,5})(#number_\d+).+?(#dtime_\d+)/gim,extract:function(tokens,match,text){return tokens[SD_tools._getNumber(match[3])].func()>23?void 0:{event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[3])].func(),m:0},event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[4])].func(),!1,!0),event_result:text,priority:27+tokens[SD_tools._getNumber(match[1])].priority}}},{regExp:/(#date_\d+).+?(#to_\d+).{0,3}(#time_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[0])].func(),event_result:text,priority:21+tokens[SD_tools._getNumber(match[0])].priority+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,c.event_duration=SD_tools._durationCounter(c.event_startTime,tokens[SD_tools._getNumber(match[2])].func()),this.match=match,c}})}},{regExp:/(#dtime_\d+).+(?:(#prep_\d+).{0,3})?(#date_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[2])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[0])].func(),!1,!0),event_result:text,priority:30+tokens[SD_tools._getNumber(match[0])].priority+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(#atime_\d+).+(#actionremind_\d+).{0,3}(#rtime_\d+)/gim,extract:function(tokens,match,text){var t=tokens[SD_tools._getNumber(match[0])].func(),c={event_startTime:SD_tools.now(60*+t.h+t.m,null,!1),event_alarms:tokens[SD_tools._getNumber(match[2])].func(),event_result:text,priority:20+tokens[SD_tools._getNumber(match[0])].priority+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#atime_\d+).+(#actionremind_\d+)/gim,extract:function(tokens,match,text){var t=tokens[SD_tools._getNumber(match[0])].func(),c={event_startTime:SD_tools.now(60*+t.h+ +t.m,null,!1),event_alarms:"0",event_result:text,priority:20+tokens[SD_tools._getNumber(match[0])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#actionremind_\d+).+?(#atime_\d+)/gim,extract:function(tokens,match,text){var t=tokens[SD_tools._getNumber(match[1])].func(),c={event_startTime:{h:+SD_tools.now(60*+t.h+ +t.m,"h"),m:+SD_tools.now(60*+t.h+ +t.m,"m"),duplicity:!1},event_alarms:"0",event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#atime_\d+).+(#dtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:{h:+SD_tools.now(0,"h")+ +tokens[SD_tools._getNumber(match[0])].func().h,m:+SD_tools.now(0,"m")+ +tokens[SD_tools._getNumber(match[0])].func().m},event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[1])].func(),!1,!0),event_result:text,priority:20+tokens[SD_tools._getNumber(match[0])].priority+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#time_\d+).+(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:tokens[SD_tools._getNumber(match[1])].func(),event_alarms:tokens[SD_tools._getNumber(match[3])].func(),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#time_\d+).*(#dtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[2])].func(),!1,!0),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.|\n){0,150}(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_alarms:tokens[SD_tools._getNumber(match[3])].func(),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(#rtime_\d+).{0,5}(#actionremind_\d+)(?:.+(#prep_\d+).{0,3}|.+?)(#date_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[3])].func(),event_alarms:tokens[SD_tools._getNumber(match[0])].func(),event_result:text,priority:20+tokens[SD_tools._getNumber(match[0])].priority+tokens[SD_tools._getNumber(match[3])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(#actionremind_\d+).{0,5}(#rtime_\d+)(?:.+(#prep_\d+).{0,3}|.+?)(#date_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[3])].func(),event_alarms:tokens[SD_tools._getNumber(match[1])].func(),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#number_\d+).+(#actionremind_\d+).{0,5}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_alarms:tokens[SD_tools._getNumber(match[3])].func(),event_result:text,priority:20+tokens[SD_tools._getNumber(match[3])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+).+(#actionremind_\d+).{0,3}(#rtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_alarms:tokens[SD_tools._getNumber(match[3])].func(),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(#actionremind_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#number_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#date_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[4])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[2])].func(),m:0},event_result:text,priority:20+tokens[SD_tools._getNumber(match[4])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+).{0,5}(#actionremind_\d+)(?:.+?(#prep_\d+).{0,3}|.{0,5})(#number_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[4])].func(),m:0},event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#time_\d+).+?(#actionremind_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:tokens[SD_tools._getNumber(match[1])].func(),event_alarms:"0",event_result:text,priority:18+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#actionremind_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#time_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:tokens[SD_tools._getNumber(match[2])].func(),
		event_alarms:"0",event_result:text,priority:18+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,5})?(#date_\d+).+(#actionremind_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_alarms:"0",event_result:text,priority:18+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(#actionremind_\d+).+?(?:.{0,5}(#prep_\d+).{0,5}|.{0,5})(#date_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[2])].func(),event_alarms:"0",event_result:text,priority:18+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.+?(#prep_\d+).{0,3}|.+?)(#time_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:tokens[SD_tools._getNumber(match[3])].func(),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};return c}},{regExp:/(?:(#prep_\d+).{0,3})?(#time_\d+)(?:.+(#prep_\d+).{0,3}|.{0,5})(#date_\d+)/gim,extract:function(tokens,match,text){return{event_startDate:tokens[SD_tools._getNumber(match[3])].func(),event_startTime:tokens[SD_tools._getNumber(match[1])].func(),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority}}},{regExp:/(#prep_\d+).{0,3}(#time_\d+)(.?[-].?)(#time_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:tokens[SD_tools._getNumber(match[1])].func().replace(/(:.+)/gim,""),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority};c.event_duration=SD_tools._durationCounter(tokens[SD_tools._getNumber(match[1])].func(),tokens[SD_tools._getNumber(match[2])].func()),SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#from_\d+|#prep_\d+).{0,3}(#time_\d+).+?(#to_\d+).{0,3}(#time_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:tokens[SD_tools._getNumber(match[1])].func(),event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[1])].func(),tokens[SD_tools._getNumber(match[3])].func()),event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority+tokens[SD_tools._getNumber(match[3])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#from_\d+).{0,3}(#number_\d+).{0,3}(#to_\d+).{0,3}(#time_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_result:text,priority:18+tokens[SD_tools._getNumber(match[3])].priority};c.event_duration=SD_tools._durationCounter(+tokens[SD_tools._getNumber(match[1])].func(),tokens[SD_tools._getNumber(match[3])].func()),SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#from_\d+).{0,3}(#number_\d+).{0,3}(#to_\d+).{0,3}(#number_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_result:text,priority:20};c.event_duration=SD_tools._durationCounter(+tokens[SD_tools._getNumber(match[1])].func(),tokens[SD_tools._getNumber(match[3])].func()),SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(?:(#prep_\d+).{0,3})?(#date_\d+)(?:.+?(#prep_\d+).{0,3}|.{0,5})(#number_\d+)/gim,extract:function(tokens,match,text){return tokens[SD_tools._getNumber(match[3])].func()>23?void 0:{event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[3])].func(),m:0},event_result:text,priority:17+tokens[SD_tools._getNumber(match[1])].priority}}},{regExp:/(#date_\d+).+?(#to_\d+).{0,3}(#number_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[2])].func()>23)){var c={event_startDate:tokens[SD_tools._getNumber(match[0])].func(),event_duration:SD_tools._durationCounter(!1,+tokens[SD_tools._getNumber(match[2])].func()),event_result:text,priority:17+tokens[SD_tools._getNumber(match[0])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}}},{regExp:/(#prep_\d+).{0,3}(#number_\d+).{0,3}(#date_\d+)/gim,extract:function(tokens,match,text){return{event_startDate:tokens[SD_tools._getNumber(match[2])].func(),event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_result:text,priority:20+tokens[SD_tools._getNumber(match[2])].priority}}},{regExp:/(#atime_\d+).+?(#dtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:SD_tools.now(60*+ +tokens[SD_tools._getNumber(match[0])].func().h+ +tokens[SD_tools._getNumber(match[0])].func().m),event_result:text,event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[1])].func(),!1,!0),priority:11+tokens[SD_tools._getNumber(match[0])].priority+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#prep_\d+).{0,5}(#number_\d+).{0,5}(#dtime_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[1])].func()>23)){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_result:text,event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[2])].func(),!1,!0),priority:16+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}}},{regExp:/(#actionremind_\d+).+?(#dtime_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:SD_tools.now(60*+ +tokens[SD_tools._getNumber(match[1])].func().h+ +tokens[SD_tools._getNumber(match[1])].func().m),event_alarms:"0",event_result:text,priority:20+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#prep_\d+).{0,3}(#time_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:tokens[SD_tools._getNumber(match[1])].func(),event_result:text,priority:10+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(?:(#prep_\d+|#before_\d+).{0,3})?(#date_\d+)/gim,extract:function(tokens,match,text){var c={event_startDate:tokens[SD_tools._getNumber(match[1])].func(),event_result:text,priority:10+tokens[SD_tools._getNumber(match[1])].priority};SD_tools._publicateQuery({query:{date:c.event_startDate,time:!0,workTime:SD_tools.workTime},callback:function(res){return c.event_startTime=res.time,this.match=match,c}})}},{regExp:/(#atime_\d+)/gim,extract:function(tokens,match,text){var t=tokens[SD_tools._getNumber(match[0])].func(),c={event_startTime:{h:+SD_tools.now(60*+t.h+ +t.m,"h"),m:+SD_tools.now(60*+t.h+ +t.m,"m"),duplicity:!1},event_result:text,priority:11+tokens[SD_tools._getNumber(match[0])].priority};tokens[SD_tools._getNumber(match[0])].func().duplicity===!1&&(c.event_startTime.duplicity=!1),SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#after_\d+).{0,5}(#number_\d+).{0,5}(#number_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:{h:SD_tools.now(60*+tokens[SD_tools._getNumber(match[1])].func()+ +tokens[SD_tools._getNumber(match[2])].func(),"h"),m:SD_tools.now(60*+tokens[SD_tools._getNumber(match[1])].func()+ +tokens[SD_tools._getNumber(match[2])].func(),"m")},event_result:text,priority:10};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#after_\d+).{0,5}(#number_\d+)/gim,extract:function(tokens,match,text){var c={event_startTime:{},event_result:text,priority:10};tokens[SD_tools._getNumber(match[1])].origin.match(/ч/gim)?(c.event_startTime.h=SD_tools.now(60*tokens[SD_tools._getNumber(match[1])].func(),"h"),c.event_startTime.m=SD_tools.now(60*tokens[SD_tools._getNumber(match[1])].func(),"m")):(c.event_startTime.h=SD_tools.now(tokens[SD_tools._getNumber(match[1])].func(),"h"),c.event_startTime.m=SD_tools.now(tokens[SD_tools._getNumber(match[1])].func(),"m"),c.event_startTime.duplicity=!1),SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}},{regExp:/(#prep_\d+).{0,5}(#number_\d+).+?(#dtime_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[1])].func()>23)){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[2])].func(),!1,!0),event_result:text,priority:6+tokens[SD_tools._getNumber(match[2])].priority};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}}},{regExp:/(#prep_\d+).{0,5}(#number_\d+)/gim,extract:function(tokens,match,text){if(!(tokens[SD_tools._getNumber(match[1])].func()>23)){var c={event_startTime:{h:tokens[SD_tools._getNumber(match[1])].func(),m:0},event_result:text,priority:6};SD_tools._publicateQuery({query:{date:!0},callback:function(res){return c.event_startDate=res.date,this.match=match,c}})}}},{regExp:/(#dtime_\d+)/gim,extract:function(tokens,match,text){var c={event_duration:SD_tools._durationCounter(tokens[SD_tools._getNumber(match[0])].func(),!1,!0),event_result:text,priority:1};SD_tools._publicateQuery({query:{date:!0,time:!0},callback:function(res){return c.event_startDate=res.date,c.event_startTime=res.time,this.match=match,c}})}}];

	/*
	 * @file SmartDate.js
	 */
	var _fakeModel=function(res){for(var dof,d,i=0,p=res;i<res.length;i++){if(p[i].query.time&&p[i].query.date&&"string"==typeof p[i].query.date)if(p[i].query.workTime){for(;"-"===p[i].query.workTime[weekdays[new Date(p[i].query.date).getDay()]];)d=new Date(p[i].query.date.replace(/-/g,"/")),dof=new Date(d.setDate(new Date(d.getDate()+1))),p[i].query.date=SD_tools.setFullDate(dof.getDate(),dof.getMonth(),+dof.getFullYear().toString().slice(-2));p[i].query.time={h:+(p[i].query.workTime[weekdays[new Date(p[i].query.date.replace(/-/g,"/")).getDay()]].match(/(.+?):/)?p[i].query.workTime[weekdays[new Date(p[i].query.date.replace(/-/g,"/")).getDay()]].match(/(.+?):/)[1]:9),m:0,duplicity:!1}}else p[i].query.time={h:SD_tools.now(0,"h"),m:SD_tools.now(0,"m"),duplicity:!1};else p[i].query.time&&(p[i].query.time={h:9,m:0,duplicity:!1});p[i].query.date&&(p[i].query.date=SD_tools.today())}return res},retoken=/#.+?_(\d+)/,_l,_retokenize=function(tokens,text){for(;_l=retoken.exec(text);)text=text.replace(_l[0],tokens[_l[1]].origin);return text},_checkCharReg=/[^.:?,]/,_checkChar=function(a){return a&&_checkCharReg.exec(a)?a:""},_clean=function(text,matched,tokens){for(var i=0;i<matched.length;i++)if(matched[i]){var r=new RegExp("(..|.)?(.|^)("+matched[i]+")(.|$)(..|.)?","gmi");text=text.replace(r,function(match,p1,p2,p3,p4,p5){var ch1,ch2,ch5,ch6,ch3=p2,ch4=p4;return p1&&p1.length>1?(ch1=p1.slice(0,1),ch2=p1.slice(1,2)):ch2=p1,p5&&p5.length>1?(ch5=p5.slice(-2,-1),ch6=p5.slice(-1)):ch5=p5,ch2&&ch2.match(/-|—/)?ch5&&ch5.match(/-|—/)?"":ch4&&ch4.match(/,/)?ch5?_checkChar(ch1)+ch4+(ch5||"")+_checkChar(ch6):_checkChar(ch1)+(ch5||"")+_checkChar(ch6):ch4&&ch4.match(/[\.!?\)]/)?ch5?(ch4||"")+(ch5||"")+_checkChar(ch6):ch4||"":(ch4||"")+(ch5||"")+_checkChar(ch6):ch3&&ch3.match(/\s/)?ch5&&ch5.match(/-|—/)?ch2&&ch2.match(/[\.!?]/)?_checkChar(ch1)+(ch2||"")+(ch3||""):ch2&&ch2.match(/,/)?_checkChar(ch1)+_checkChar(ch6):_checkChar(ch1)+(ch2||"")+(ch3||""):ch4&&ch4.match(/\s/)?_checkChar(ch1)+(ch2||"")+ch3+(ch5||"")+_checkChar(ch6):ch4&&ch4.match(/,/)?ch5?ch2&&ch2.match(/\./)?_checkChar(ch1)+(ch2||"")+_checkChar(ch6):_checkChar(ch1)+(ch2||"")+ch4+(ch5||"")+_checkChar(ch6):_checkChar(ch1)+(ch2||"")+ch3+(ch5||"")+_checkChar(ch6):ch4&&ch4.match(/:/)?ch5&&ch5.match(/\s/)?_checkChar(ch1)+(ch2||"")+ch5+_checkChar(ch6):_checkChar(ch1)+(ch2||"")+(ch5||"")+_checkChar(ch6):ch4&&ch4.match(/[\.!?\)]/)?ch2&&ch2.match(/[\.!?]/)?_checkChar(ch1)+(ch2||"")+(ch5||"")+_checkChar(ch6):ch2&&ch2.match(/,/)?ch5?_checkChar(ch1)+(ch4||"")+(ch5||"")+_checkChar(ch6):_checkChar(ch1)+(ch4||"")+_checkChar(ch6):_checkChar(ch1)+(ch2||"")+ch4+(ch5||"")+_checkChar(ch6):ch4&&ch4.match(/#/)?_checkChar(ch1)+(ch2||"")+(ch4||"")+(ch5||"")+_checkChar(ch6):ch4&&ch5?_checkChar(ch1)+(ch2||"")+(ch3||"")+(ch5||"")+_checkChar(ch6):ch2&&ch2.match(/,/)?_checkChar(ch1)+_checkChar(ch6):_checkChar(ch1)+(ch2||"")+_checkChar(ch6):ch3&&ch3.match(/,/)?ch4.match(/\s/)?_checkChar(ch1)+(ch2||"")+ch3+(ch5||"")+_checkChar(ch6):ch4&&ch4.match(/,/)?_checkChar(ch1)+(ch2||"")+ch3+(ch5||"")+_checkChar(ch6):ch4&&ch4.match(/[\.!?]/)?_checkChar(ch1)+(ch2||"")+ch3+(ch5||"")+_checkChar(ch6):ch4&&ch5?_checkChar(ch1)+(ch2||"")+(ch5||"")+_checkChar(ch6):ch2&&ch2.match(/\s/)?_checkChar(ch1)+_checkChar(ch6):ch2||"":ch3&&ch3.match(/\(/)?_checkChar(ch1)+(ch5||"")+_checkChar(ch6):ch2&&ch3?ch4&&ch4.match(/,/)?_checkChar(ch1)+(ch2||"")+(ch3||"")+(ch4||"")+(ch5||"")+_checkChar(ch6):_checkChar(ch1)+(ch2||"")+(ch3||"")+(ch5||"")+_checkChar(ch6):ch4.match(/[,\.:]/)&&ch5&&ch5.match(/\s/)?_checkChar(ch1)+_checkChar(ch6):ch4&&ch4.match(/#/)?_checkChar(ch1)+(ch2||"")+(ch4||"")+(ch5||"")+_checkChar(ch6):ch5&&ch5.match(/-/)?_checkChar(ch1):_checkChar(ch1)+(ch5||"")+_checkChar(ch6)})}return text=_retokenize(tokens,text)},weekdays=["Su","Mo","Tu","We","Th","Fr","Sa"],smartDateParse=function(text,options,callback){var i,rx,mt,cb,pr,_t=[],k=[],kpr=[],combError=!1,_sort=function(){k.sort(function(a,b){return a.priority<b.priority?1:a.priority>b.priority?-1:0})},_processModelResult=function(res){for(var i=0;i<res.length;i++)_processCombRes(SD_tools.queries[res[i]._id].callback(res[i].query),SD_tools.queries[res[i]._id].match,res[i].query.time?!1:!0)},_checkCombProperties=function(c){!c.event_type&&(c.event_type="N"),!c.event_startDate&&(c.event_startDate=SD_tools.today()),!c.event_duration&&(c.event_duration="30"),!c.event_startTime&&(c.event_startTime="09:00")},_dayShift=function(date,offset){var d=new Date(date.replace(/-/g,"/")),dof=new Date(d.setDate(new Date(d.getDate()+offset)));return SD_tools.setFullDate(dof.getDate(),dof.getMonth()+1,+dof.getFullYear().toString().slice(-2))},_getWorkTime=function(sourcedate){var lwt,wt=SD_tools.workTime,r={};if(wt&&(lwt=wt[weekdays[new Date(sourcedate.replace(/-/g,"/")).getDay()]])){if("-"===lwt)return;return lwt.replace(/(\d+):(\d+)-(\d+):(\d+)/,function(match,p1,p2,p3,p4){match&&(r={beg:{h:+p1,m:+p2},end:{h:+p3,m:+p4}})}),r}},_checkRelevance=function(c){var WTcheck;c.event_startDate===SD_tools.today()&&c.event_startTime.h&&c.event_startTime.h<SD_tools.now(0,"h")&&c.requested===!0&&(c.event_startDate=_dayShift(c.event_startDate,1),c.priority-=1),WTcheck=_getWorkTime(c.event_startDate),"allday"===c.event_duration&&(WTcheck?(c.event_startTime.h>=WTcheck.beg.h||c.event_startTime.h<=WTcheck.end.h)&&(c.event_duration=c.event_startDate===SD_tools.today()?SD_tools._durationCounter(c.event_startTime,WTcheck.end):SD_tools._durationCounter(WTcheck.beg,WTcheck.end)):c.event_duration=SD_tools._durationCounter(c.event_startTime,0)),c.event_startTime.h&&(WTcheck&&(+c.event_startTime.h<WTcheck.beg.h||+c.event_startTime.h>WTcheck.end.h)||c.event_startDate===SD_tools.today()&&+c.event_startTime.h<SD_tools.now(0,"h"))&&(c.priority-=1),c.event_startDate===SD_tools.today()&&c.event_startTime.h&&c.event_startTime.h<SD_tools.now(0,"h")&&(c.priority-=1),c.event_startDate===SD_tools.today()&&0===c.event_startTime.h&&(c.event_startDate=_dayShift(c.event_startDate,1),c.event_startTime.h=0),c.event_startTime.offset&&(c.event_startDate=_dayShift(c.event_startDate,c.event_startTime.offset))},_stringifyAndPush=function(c,ks_array,duplicate){var cl,h=c.event_startTime.h,m=c.event_startTime.m;24===+h&&(h=0),duplicate?(cl=c.clone(),_checkRelevance(c),c.event_startTime=(+h>9?h:"0"+h)+":"+(+m>9?m:"0"+ +m),ks_array.push(c),cl.event_startTime.h=+h+12,_checkRelevance(cl),cl.event_startTime=(+cl.event_startTime.h>9?cl.event_startTime.h:"0"+cl.event_startTime.h)+":"+(+m>9?m:"0"+ +m),ks_array.push(cl)):(_checkRelevance(c),c.event_startTime=(+h>9?h:"0"+h)+":"+(+m>9?m:"0"+ +m),ks_array.push(c))},_processCombRes=function(result,match,requested){result&&(result.match=match,requested&&(result.requested=!0),_checkCombProperties(result),result.event_startTime.h&&result.event_startTime.h<13&&result.event_startTime.duplicity!==!1?_stringifyAndPush(result,k,!0):_stringifyAndPush(result,k))};for(Object.prototype.clone=function(){return JSON.parse(JSON.stringify(this))},options.environment?(options.environment.date?SD_tools.localDate=new Date(options.environment.date.replace(/-/g,"/")):SD_tools.today().replace(/-/g,"/"),options.environment.time?SD_tools.localDate.setHours(+options.environment.time.slice(0,2),+options.environment.time.slice(-2)):SD_tools.now(0,"ISO"),SD_tools.workTime=options.environment.workTime):SD_tools.localDate=null,SD_tools.query=[],i=0;i<tokens.length,rx=tokens[i];i++)text=text.replace(rx.regExp,function(){var lt,c=Array.prototype.slice.call(arguments),r="#"+rx.type+"_"+_t.length,tk={origin:c.shift(),captured:c,func:rx.func,type:rx.type,priority:rx.priority};return _t[_t.length]=tk,(lt=rx.replace.apply(tk,[r].concat(c)))?lt:arguments[0]});for(i=0;i<metatokens.length,rx=metatokens[i];i++)text=text.replace(rx.regExp,function(){var lr,c=Array.prototype.slice.call(arguments),r="#"+rx.type+"_"+_t.length,tk={origin:c.shift(),captured:c,func:rx.func,type:rx.type,priority:rx.priority};return _t[_t.length]=tk,(lr=rx.replace.apply(tk,[r].concat([_t]).concat(c)))?lr:arguments[0]});if(_t.length)for(i=0;i<combinations.length,cb=combinations[i];i++)for(;null!==(mt=cb.regExp.exec(text));)mt.shift(),_processCombRes(cb.extract(_t,mt,text),mt);if(SD_tools.queries.length&&(_processModelResult(_fakeModel(SD_tools.queries)),SD_tools.queries=[]),_sort(),options.singleMode){for(pr=k[0]&&k[0].priority,kpr.push(k[0]),i=1;i<k.length;i++)k[i].priority===pr&&kpr.push(k[i]);k=kpr}if(k.length&&k[0])for(i=0;i<k.length;i++)k[i].event_result=_clean(k[i].event_result,k[i].match,_t);"function"==typeof options?options(combError,k):callback(combError,k)};

	/*
	 * @file ios.js
	 */
	var self=this;this.parseText=function(text,options){options||(options={}),self.modelQuery&&(options.model=function(query,callback){callback(self.modelQuery(query))}),smartDateParse(text,options,function(err,res){self.sendResult(+err,res||{})})};
} ).call( this );